<tool id="datasets.pbmc68k_reduced" name="datasets.pbmc68k_reduced" version="1.3.1+galaxy1">
  <description>10x PBMC 68k dataset from</description>
  <macros>
    <import>macros.xml</import>
  </macros>
  <expand macro="requirements"/>
  <command detect_errors="exit_code"><![CDATA[
        python $script_file
    ]]></command>
  <configfiles>
    <configfile name="script_file"><![CDATA[
import scanpy.api as sc



sc.datasets.pbmc68k_reduced()

adata.write_loom($csv_output)
adata.write_csv($loom_output)
]]></configfile>
  </configfiles>
  <inputs>
    </inputs>
  <outputs>
    <data name="csv_output" type="data" format="csv" label="${tool.name} on ${on_string}: Annotated matrix (csv)"/>
    <data name="loom_output" type="data" format="loom" label="${tool.name} on ${on_string}: Annotated matrix (loom)"/>
    </outputs>
  <tests>
    <test>
      <output name="loom_output" file=""/>
      <output name="csv_output" file=""/>
      <output name="loom_output" file=""/>
    </test>
  </tests>
  <help><![CDATA[
        10x PBMC 68k dataset from
https://support.10xgenomics.com/single-cell-gene-expression/datasets

The original PBMC 68k dataset was preprocessed using scanpy and was saved
keeping only 724 cells and 221 highly variable genes.

The saved file contains the annotation of cell types (key: 'bulk_labels'), UMAP coordinates,
louvain clustering and gene rankings based on the bulk_labels.

Returns
-------
adata : :class:`~anndata.AnnData`
    Annotated data matrix.
    ]]></help>
  <expand macro="citations"/>
</tool>
