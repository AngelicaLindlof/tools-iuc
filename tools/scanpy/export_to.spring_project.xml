<tool id="export_to.spring_project" name="export_to.spring_project" version="1.3.1+galaxy1">
  <description>Exports to a SPRING project directory [Weinreb17]_.</description>
  <macros>
    <import>macros.xml</import>
  </macros>
  <expand macro="requirements"/>
  <command detect_errors="exit_code"><![CDATA[
        python $script_file
    ]]></command>
  <configfiles>
    <configfile name="script_file"><![CDATA[
import scanpy.api as sc

@CMD_read_inputs

sc.export_to.spring_project(
   adata = '$adata',
   project_dir = '$project_dir',
   embedding_method: `str` = '$embedding_method: `str`',
   subplot_name: `str`, optional (default: `None`) = '$subplot_name: `str`, optional (default: `None`)',
   cell_groupings = '$cell_groupings',
   custom_color_tracks = '$custom_color_tracks',
   total_counts_key: `str`, optional (default: "n_counts") = '$total_counts_key: `str`, optional (default: "n_counts")',
   overwrite: `boolean`, optional (default: `False`) = '$overwrite: `boolean`, optional (default: `False`)',
   Examples = '$Examples',
   -------- = '$--------',
   See this `tutorial <https://github.com/theislab/scanpy_usage/tree/master/171111_SPRING_export>`__. = '$See this `tutorial <https://github.com/theislab/scanpy_usage/tree/master/171111_SPRING_export>`__.',)
]]></configfile>
  </configfiles>
  <inputs>
    <expand macro="inputs_anndata"/>
    <param name="project_dir" type="str" value="" label="project_dir" help="    Path to directory for exported SPRING files."/>
    <param name="embedding_method: `str`" type="data" format="" value="" label="embedding_method: `str`" help="    Name of a 2-D embedding in `adata.obsm`"/>
    <param name="subplot_name: `str`, optional (default: `None`)" type="data" format="" value="" label="subplot_name: `str`, optional (default: `None`)" help="    Name of subplot folder to be created at `project_dir+&quot;/&quot;+subplot_name`"/>
    <param name="cell_groupings" type="str" value="None" optional="true" label="cell_groupings" help="    Instead of importing all categorical annotations when `None`,    pass a list of keys for `adata.obs`."/>
    <param name="custom_color_tracks" type="str" value="None" optional="true" label="custom_color_tracks" help="    Specify specific `adata.obs` keys for continuous coloring."/>
    <param name="total_counts_key: `str`, optional (default: &quot;n_counts&quot;)" type="data" format="" value="" label="total_counts_key: `str`, optional (default: &quot;n_counts&quot;)" help="    Name of key for total transcript counts in `adata.obs`."/>
    <param name="overwrite: `boolean`, optional (default: `False`)" type="data" format="" value="" label="overwrite: `boolean`, optional (default: `False`)" help="    When `True`, existing counts matrices in `project_dir` are overwritten."/>
    <param name="Examples" type="data" format="" value="" label="Examples" help=""/>
    <param name="--------" type="data" format="" value="" label="--------" help=""/>
    <param name="See this `tutorial &lt;https://github.com/theislab/scanpy_usage/tree/master/171111_SPRING_export&gt;`__." type="data" format="" value="" label="See this `tutorial &lt;https://github.com/theislab/scanpy_usage/tree/master/171111_SPRING_export&gt;`__." help=""/>
    </inputs>
  <outputs>
    </outputs>
  <tests>
    <test>
      <param name="project_dir" value=""/>
      <param name="embedding_method: `str`" value=""/>
      <param name="subplot_name: `str`, optional (default: `None`)" value=""/>
      <param name="cell_groupings" value=""/>
      <param name="custom_color_tracks" value=""/>
      <param name="total_counts_key: `str`, optional (default: &quot;n_counts&quot;)" value=""/>
      <param name="overwrite: `boolean`, optional (default: `False`)" value=""/>
      <param name="Examples" value=""/>
      <param name="--------" value=""/>
      <param name="See this `tutorial &lt;https://github.com/theislab/scanpy_usage/tree/master/171111_SPRING_export&gt;`__." value=""/>
    </test>
  </tests>
  <help><![CDATA[
        Exports to a SPRING project directory [Weinreb17]_.

Visualize annotation present in `adata`. By default, export all gene expression data
from `adata.raw` and categorical and continuous annotations present in `adata.obs`.

See `SPRING <https://github.com/AllonKleinLab/SPRING>`__ or [Weinreb17]_ for details.

Parameters
----------
adata : :class:`~anndata.AnnData`
    Annotated data matrix: `adata.uns['neighbors']` needs to
    be present.
project_dir : `str`
    Path to directory for exported SPRING files.
embedding_method: `str`
    Name of a 2-D embedding in `adata.obsm`
subplot_name: `str`, optional (default: `None`)
    Name of subplot folder to be created at `project_dir+"/"+subplot_name`
cell_groupings : `str`, `list` of `str`, optional (default: `None`)
    Instead of importing all categorical annotations when `None`,
    pass a list of keys for `adata.obs`.
custom_color_tracks : `str`, `list` of `str`, optional (default: `None`)
    Specify specific `adata.obs` keys for continuous coloring.
total_counts_key: `str`, optional (default: "n_counts")
    Name of key for total transcript counts in `adata.obs`.
overwrite: `boolean`, optional (default: `False`)
    When `True`, existing counts matrices in `project_dir` are overwritten.

Examples
--------
See this `tutorial <https://github.com/theislab/scanpy_usage/tree/master/171111_SPRING_export>`__.
    ]]></help>
  <expand macro="citations"/>
</tool>
